# Follow-up TODOs

1. **Teach the scheduler how to handle `do: "escalate"` actions.** The focus escalation template ships with an `escalate` action, but the runtime only branches on `suppress_tasks` and `notify`, so those events currently no-op.【F:src/components/reminders/conditional-rule-manager.tsx†L184-L201】【F:src/jobs/scheduler.ts†L600-L790】 Implementing the missing verb (and any related persistence) will unlock the preset.
2. **Replace the push-as-email fallback with real push delivery.** `dispatchNotification` reuses the email sender when a rule targets the push channel, which is fine as a stopgap but prevents true push transports.【F:src/jobs/scheduler.ts†L793-L836】 Introduce a push gateway (web push, SNS, etc.) and update channel logic accordingly.
3. **Make auto layout spacing-aware.** The current redistribution packs plants into evenly spaced rows/columns without consulting species spacing, whereas `commitPlacement` already enforces in-row/between-row buffers.【F:src/components/garden/garden-planner.tsx†L637-L699】【F:src/components/garden/garden-planner.tsx†L1004-L1155】 Reusing that spacing logic would yield layouts that better respect plant requirements.
4. **Split `GardenPlanner` into composable pieces.** The component has grown past 2,000 lines, blending measurement math, drag/drop, popovers, and API orchestration in one file.【F:src/components/garden/garden-planner.tsx†L321-L2185】 Extracting hooks (e.g. measurement, placement, focus) and presentational subcomponents would improve readability and testability.
5. **Feed real coordinates into plan computations.** The `/api/compute/plan` endpoint always calls Open-Meteo with `(0,0)` coordinates, ignoring the user’s saved location and climate data. That limits the usefulness of generated care plans.【F:app/api/compute/plan/route.ts†L27-L55】 Pipe the caller’s lat/lon (or garden location) through so forecast, soil temp, and frost risk reflect reality.

